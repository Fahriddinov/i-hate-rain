:root{
    --bg: #0b0f14;
    --panel: rgba(255,255,255,0.06);
    --panel-border: rgba(255,255,255,0.15);
    --text: #e6f0ff;
    --accent: #7cc4ff;
  }
  *{ box-sizing: border-box }
  html, body{ height:100%; }
  body{
    margin:0;
    background: radial-gradient(1200px 800px at 70% -10%, #1b2430 0%, var(--bg) 60%) no-repeat fixed;
    color: var(--text);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    overflow:hidden;
  }

  canvas#rain { position: fixed; inset: 0; width: 100vw; height: 100vh; display:block; }

  /* Glassy control panel */
  .panel{
    position: fixed; left: 16px; top: 16px; z-index: 10;
    background: var(--panel);
    -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(10px);
    border: 1px solid var(--panel-border);
    border-radius: 16px; padding: 14px 14px 10px;
    width: min(360px, calc(100vw - 32px));
    box-shadow: 0 10px 30px rgba(0,0,0,0.35);
  }
  .panel h1{ margin: 0 0 10px 0; font-size: 16px; letter-spacing: 0.5px; font-weight: 700; display:flex; align-items:center; gap:8px; }
  .row{ display:grid; grid-template-columns: 1fr auto; gap:10px; align-items:center; margin:8px 0; }
  .row label{ font-size: 12px; opacity: 0.9; }
  .row input[type="range"]{ width: 160px; }
  .row input[type="color"]{ width: 38px; height: 28px; padding:0; border:none; background:transparent }
  .row input[type="checkbox"]{ transform: translateY(1px); }
  .hint{ font-size: 11px; opacity:0.7; margin-top:6px }

  .badge{ display:inline-flex; gap:6px; align-items:center; background: rgba(124,196,255,0.12); border:1px solid rgba(124,196,255,0.35); color: var(--accent); padding:4px 8px; border-radius:999px; font-size:11px; font-weight:600; }

  .vignette{ position:fixed; inset:0; pointer-events:none; z-index:1; }
  .vignette::before{ content:""; position:absolute; inset:0; background: radial-gradient(1200px 800px at 50% -200px, rgba(255,255,255,0.1), transparent 45%), radial-gradient(800px 400px at 50% 100%, rgba(255,255,255,0.04), transparent 70%); }

  /* Lightning flash overlay */
  .flash{ position:fixed; inset:0; pointer-events:none; background: rgba(255,255,255,0); mix-blend-mode:screen; transition: background 200ms ease; z-index:2; }

  #playBtn{
    position: fixed; left: 400px; top: 16px; z-index: 10;
    background: var(--panel);
    -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(10px);
    border: 1px solid var(--panel-border);
    border-radius: 16px; padding: 14px 14px 10px;
    width: min(360px, calc(100vw - 32px));
    box-shadow: 0 10px 30px rgba(0,0,0,0.35);
  }